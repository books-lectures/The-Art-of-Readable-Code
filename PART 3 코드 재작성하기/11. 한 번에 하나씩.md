# 11. í•œ ë²ˆì— í•˜ë‚˜ì”©

```
ğŸ’¡ â€˜í•¨ìˆ˜ëŠ” ì˜¤ì§ í•œê°€ì§€ ì‘ì—…ë§Œ í•´ì•¼í•œë‹¤â€™ ë¼ëŠ” ë§ì´ ìˆì§€ë§Œ, ì´ëŸ¬í•œ ì¡°ì–¸ì´ í•¨ìˆ˜ ìˆ˜ì¤€ì—ë§Œ ë¨¸ë¬´ë¥´ëŠ”ê²ƒì€ ì•„ë‹ˆë‹¤.  
í•¨ìˆ˜ë‚´ì—ì„œë„ ì—¬ëŸ¬ ì‘ì—…ì„ í•œêº¼ë²ˆí•´ ìˆ˜í–‰í•˜ëŠ”ê²ƒë³´ë‹¤ ê°ê°ì˜ ì‘ì—…ì´ ë³„ë„ë¡œ ì‹œì‘ë˜ì—ˆë‹¤ê°€ ì™„ë£Œë˜ëŠ” ê²½ìš°ê°€ ì´í•´í•˜ê¸° ë” ì‰½ë‹¤
```


## 1. ì½”ë“œ êµ¬ì„± ë°©ë²•

- ì½”ë“œê°€ ìˆ˜í–‰í•˜ëŠ” `ëª¨ë“  ì‘ì—…ì„ ë‚˜ì—´`í•œë‹¤.
- `ë³„ë„ì˜ í•¨ìˆ˜ë‚˜ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬`ê°€ ê°€ëŠ¥í•œ ë¶€ë¶„ì€ ë¶„ë¦¬í•œë‹¤
- ë‹¤ë¥¸ ë¶€ë¶„ì€ ë…¼ë¦¬ì ìœ¼ë¡œ `êµ¬ë¶„ë˜ëŠ” ì˜ì—­`ì— ë¶„ë¦¬í•œë‹¤

## 2. ì‘ì—…ì€ ì‘ì„ ìˆ˜ ìˆë‹¤

- ì´í•¨ìˆ˜ëŠ” old_voteì™€ new_voteì˜ ì–´ë–¤ ì¡°í•©ì—ë„ ì •ìƒë™ì‘í•˜ì—¬ ì „ì²´ì ìˆ˜ë¥¼ ì¡°ì‘í•œë‹¤.

### ğŸ˜¢Â Not Recomended

```jsx
// ë‘ê°€ì§€ ì¼ì´ ì„ì—¬ ìˆ˜í–‰ë˜ê³  ìˆë‹¤
// 1 .old_voteì™€ new_voteê°€ ìˆ˜ì¹˜ê°’ìœ¼ë¡œ í•´ì„ë¨
// 2. ì ìˆ˜ê°€ ë³€ê²½ë¨

function vote_changed(old_vote, new_vote) {
	var score = get_score();
	
	if(new_vote !== old_vote) {
		if(new_vote === 'Up'){
			score += (old_vote === 'Down' ? 2 : 1);
		} 
		else if(new_vote === 'Down') {
			score -= (old_vote === 'Up' ? 2 : 1);
		} else if(new_vote === '') {
			score += (old_vote === 'Up' ? -1 : 1);
		}
	}
	set_score(score);

}
```

### ğŸ˜„Â Recomended

```jsx
// ë‘ê°€ì§€ ì¼ì´ ë¶„ë¦¬ë˜ì–´ ìˆ˜í–‰ë˜ê³  ìˆë‹¤
// 1. vote_valueí•¨ìˆ˜ë¥¼ í†µí•´ ìˆ˜ì¹˜ê°’ìœ¼ë¡œ í•´ì„í•˜ëŠ” ì‘ì—…ì„ ë¶„ë¦¬
// 2. í•¨ìˆ˜ë¥¼ ì¬í™œìš©í•˜ì—¬ old_voteì™€ new_voteë¥¼ ì ìˆ˜ì— ë°˜ì˜

function vote_value(vote) {
	if(vote === 'Up') {
		return +1;
	}
	if(vote === 'Down') {
		return -1;
	}
	return 0;
}

function vote_changed = (old_vote, new_vote) {
	var score = get_score();
	
	vote_value(old_vote); // ì´ì „ê°’ ì œê±°
	vote_value(new_vote); // ìƒˆê°’ ì¶”ê°€

	set_score(score); // ì ìš©

}
```

## 3. ê°ì²´ì—ì„œ ê°’ ì¶”ì¶œí•˜ê¸°

- ê°ì²´ì—ì„œ ì¼ë¶€ ê°’ì´ ì—†ëŠ”ê²½ìš°, ê°’ì„ í™•ì¸í•˜ì—¬ ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ì¬í• ë‹¹ í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤
- ì˜ˆë¥¼ë“¤ì–´ ë„ì‹œ(ì—†ìœ¼ë©´) â‡’ ìì¹˜ì£¼(ì—†ìœ¼ë©´) â‡’ ì£¼(ì—†ìœ¼ë©´) â‡’ â€˜ì§€êµ¬â€™ ë¡œ ê°’ì„ í• ë‹¹í•˜ëŠ” ë¡œì§ì´ë‹¤

### ğŸ˜¢Â Not Recomended

```jsx
// í•´ì‹œë§µì—ì„œ ê°’ì„ ì½ëŠ”ê¸°ëŠ¥ê³¼ ìˆœì„œëŒ€ë¡œ ê°’ì„ í• ë‹¹í•˜ëŠ” ì‘ì—…ì´ ì„ì—¬ìˆë‹¤

let place = location_info['ë„ì‹œ'];

if(!place) {
	place = location_info['ìì¹˜ì£¼'];
}
if(!place) {
	place = location_info['ì£¼'];
}
if(!place) {
	place = 'ì§€êµ¬';
}
```

### ğŸ˜„Â Recomended

```jsx
// í•´ì‹œë§µì—ì„œ ê°’ì„ ë¨¼ì € ì½ëŠ”ë‹¤
// ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ê°’ì„ í• ë‹¹í•œë‹¤

const town = location_info['ë„ì‹œ'];
const city = location_info['ìì¹˜ì£¼'];
const state = location_info['ì£¼'];

// ì²«ë²ˆì§¸ trueê°’ì„ ë°˜í™˜í•œë‹¤
place = town || city || state || 'ì§€êµ¬'
```

## 4. ë” í° ì˜ˆì œ

- ì½”ë“œì „ë°˜ì— ê±¸ì³ì„œ ì‘ì—…ë“¤ì´ ë’¤ì„ì—¬ìˆëŠ” ê²½ìš°

### ğŸ˜¢Â Not Recomended

```java
// ë’¤ì„ì—¬ìˆëŠ” ì‘ì—…ë“¤
// ê° í‚¤ ê¸°ë³¸ê°’ 'unknown'ìœ¼ë¡œ ì„¤ì •
// HttpDownloadë©¤ë²„ì¤‘ ê°’ì´ì—†ëŠ”ì§€ í™•ì¸
// ê°’ì„ ì½ì–´ì„œ ë¬¸ìì—´ë¡œ ë³€í™˜
// count[] ê°’ ê°±ì‹ í•˜ê¸°

void UpdateCounts(HttpDownload hd) {
	
	// ê°’ì´ ìˆìœ¼ë©´ Exit Stateë¥¼ ë„£ëŠ”ë‹¤
	if(!hd.has_event_log() || !hd.event_log().has_exit_state()) {
		counts['Exit State']['unknown']++;
	} else {
		counts['Exit State']['state_str']++;
	}
	
	// ë§Œì•½ HTTP í—¤ë”ê°€ ì•„ì˜ˆ ì—†ìœ¼ë©´, ë‚˜ë¨¸ì§€ ìš”ì†Œë“¤ì„ ìœ„í•´ 'unknown'ì„ ì‚¬ìš©í•œë‹¤
	if(!hd.has_http_headers()) {
		counts['Http Response']['unknown']++;
		counts['Content-Type']['unknown']++;
	}
	
	HttpHeaders headers = hd.http_headers();

	// ê°’ì´ ìˆìœ¼ë©´ HTTPì‘ë‹µì„ ê¸°ë¡í•˜ê³ , ì•„ë‹ˆë©´ 'unknown'ì„ ê¸°ë¡í•œë‹¤
	if(!headers.has_response_code()) {
		counts['Http Response']['unknown']++;
	}	else {
		counts['Http Response']['code']++;
	}
}
```

### ğŸ˜„Â Recomended

```jsx
// ìœ„ì— ì„ì—¬ìˆë˜ ì‘ì—…ë“¤ì´ ë³„ë„ì˜ ì˜ì—­ìœ¼ë¡œ ë¶„ë¦¬ë˜ì—ˆë‹¤

void UpdateCounts(HttpDownload hd) {
	
	// ì½ê³ ì í•˜ëŠ”ê°’ì˜ ê¸°ë³¸ê°’ì„ ì •ì˜
	string exit_state = 'unknown';
	string http_response = 'unknown';
	string content_type = 'unknown';

	// HttpDownloadì—ì„œ ê°ê°ì˜ ê°’ì„ ì½ëŠ”ë‹¤
	if(!hd.has_event_log() && !hd.event_log().has_exit_state()) {
		exit_state = ExitStateTypeName(hd.event_log().exit_state());
	} 
	if(!hd.has_http_headers() && hd.http_headers().has_response_code()) {
		http_response = StringPrint('%d', hd.http_headers().response_code())
	}
	if(!hd.has_http_headers() && hd.http_headers().has_content_type()) {
		content_type = ContentTypeMime(hd.http_headers().content_type())
	}

	// count[]ë¥¼ ê°±ì‹ 
	counts['Exit State']['exit_state']++;
	counts['Http Response']['http_response']++;
	counts['Content-Type']['content_type']++;
```
